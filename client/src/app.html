<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%sveltekit.assets%/favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
    <meta name="google-site-verification" content="tLwSY-sCSyflthL65rzVskAXEYwvTDU5iV2QSrJLuO4" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Kumbh+Sans:wght@400;600;700&display=swap"
      rel="stylesheet"
    />

    %sveltekit.head%

    <!-- ‚úÖ DEBUG: Confirm this file is being used -->
    <script>
      console.log("‚úÖ app.html loaded");
    </script>

    <!-- ‚úÖ Manual script injection for Privacy Analytics -->
    <script>
        console.log("üõ∞Ô∏è Injecting Privacy Analytics script...");
      
        const js = document.createElement('script');
        js.src = 'https://rp-blond.vercel.app/api/tracking/script?id=468c460f-3b52-499c-b5b5-4ed91039f11a';
        js.async = true;
      
        js.onload = function () {
          console.log("‚úÖ Privacy Analytics script loaded");
      
          // Wait a tick to ensure pa is registered
          setTimeout(() => {
            if (window.pa && typeof window.pa.track === 'function') {
              console.log("üì° Tracking pageview...");
              window.pa.track('pageview'); // or whatever your API expects
            } else {
              console.warn("‚ö†Ô∏è Privacy Analytics global `pa` not defined or missing `track` method");
              console.log("window.pa:", window.pa);
            }
          }, 0);
        };
      
        js.onerror = function () {
          console.error("‚ùå Failed to load Privacy Analytics script");
        };
      
        document.head.appendChild(js);
    </script>

  <script>
        console.log("üöÄ Sending test request to /api/test...");
      
        fetch("https://rp-blond.vercel.app/api/test", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ test: true })
        })
          .then(res => res.json())
          .then(data => {
            console.log("‚úÖ Test API response:", data);
          })
          .catch(err => {
            console.error("‚ùå Test API call failed:", err);
          });
  </script>

  </head>

  <body data-sveltekit-preload-data="hover">
    <div style="display: contents">%sveltekit.body%</div>
  </body>
</html>
